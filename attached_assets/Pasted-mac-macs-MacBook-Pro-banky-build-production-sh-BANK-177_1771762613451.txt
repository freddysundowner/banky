mac@macs-MacBook-Pro banky % ./build-production.sh 

========================================
  BANKY Production Build Script
========================================

Select build type:
  1) SaaS Build (for your cloud deployment)
  2) Enterprise Build (end-user self-hosting)
  3) CodeCanyon Package (source code + installer for buyers)
  4) Build All
  5) Exit

Enter choice [1-5]: Invalid option
mac@macs-MacBook-Pro banky % ./build-production.sh
========================================
  BANKY Production Build Script
========================================

Select build type:
  1) SaaS Build (for your cloud deployment)
  2) Enterprise Build (end-user self-hosting)
  3) CodeCanyon Package (source code + installer for buyers)
  4) Build All
  5) Exit

Enter choice [1-5]: 3

========================================
  Building CodeCanyon Package
========================================

>>> Packaging source code for CodeCanyon...
    (No build needed - buyers run install.sh on their server)
>>> CodeCanyon build complete: packages/codecanyon/
  adding: banky/ (stored 0%)
  adding: banky/install.sh (deflated 76%)
  adding: banky/server/ (stored 0%)
  adding: banky/server/index.ts (deflated 70%)
  adding: banky/shared/ (stored 0%)
  adding: banky/shared/schema.ts (deflated 29%)
  adding: banky/shared/models/ (stored 0%)
  adding: banky/shared/models/organization.ts (deflated 68%)
  adding: banky/shared/models/auth.ts (deflated 66%)
  adding: banky/shared/tenant-types.ts (deflated 82%)
  adding: banky/python_backend/ (stored 0%)
  adding: banky/python_backend/accounting/ (stored 0%)
  adding: banky/python_backend/accounting/service.py (deflated 84%)
  adding: banky/python_backend/accounting/models.py (deflated 72%)
  adding: banky/python_backend/accounting/__init__.py (deflated 49%)
  adding: banky/python_backend/accounting/schemas.py (deflated 76%)
  adding: banky/python_backend/accounting/routes.py (deflated 81%)
  adding: banky/python_backend/middleware/ (stored 0%)
  adding: banky/python_backend/middleware/audit.py (deflated 69%)
  adding: banky/python_backend/middleware/__init__.py (deflated 21%)
  adding: banky/python_backend/middleware/rate_limit.py (deflated 68%)
  adding: banky/python_backend/cron_process_matured.py (deflated 78%)
  adding: banky/python_backend/cron_loan_notifications.py (deflated 75%)
  adding: banky/python_backend/requirements.txt (deflated 33%)
  adding: banky/python_backend/cron_renewal_reminders.py (deflated 73%)
  adding: banky/python_backend/models/ (stored 0%)
  adding: banky/python_backend/models/tenant.py (deflated 86%)
  adding: banky/python_backend/models/database.py (deflated 68%)
  adding: banky/python_backend/models/__init__.py (stored 0%)
  adding: banky/python_backend/models/master.py (deflated 82%)
  adding: banky/python_backend/schemas/ (stored 0%)
  adding: banky/python_backend/schemas/auth.py (deflated 64%)
  adding: banky/python_backend/schemas/tenant.py (deflated 88%)
  adding: banky/python_backend/schemas/organization.py (deflated 75%)
  adding: banky/python_backend/schemas/__init__.py (stored 0%)
  adding: banky/python_backend/cron_check_trials.py (deflated 67%)
  adding: banky/python_backend/cron_recurring_expenses.py (deflated 70%)
  adding: banky/python_backend/scheduler.py (deflated 67%)
  adding: banky/python_backend/main.py (deflated 79%)
  adding: banky/python_backend/routes/ (stored 0%)
  adding: banky/python_backend/routes/auth.py (deflated 84%)
  adding: banky/python_backend/routes/exports.py (deflated 78%)
  adding: banky/python_backend/routes/sunpay.py (deflated 82%)
  adding: banky/python_backend/routes/float_management.py (deflated 86%)
  adding: banky/python_backend/routes/expenses.py (deflated 84%)
  adding: banky/python_backend/routes/staff.py (deflated 81%)
  adding: banky/python_backend/routes/branches.py (deflated 77%)
  adding: banky/python_backend/routes/audit.py (deflated 78%)
  adding: banky/python_backend/routes/teller_services.py (deflated 84%)
  adding: banky/python_backend/routes/members.py (deflated 82%)
  adding: banky/python_backend/routes/mpesa.py (deflated 82%)
  adding: banky/python_backend/routes/roles.py (deflated 84%)
  adding: banky/python_backend/routes/organization.py (deflated 79%)
  adding: banky/python_backend/routes/transactions.py (deflated 78%)
  adding: banky/python_backend/routes/documents.py (deflated 85%)
  adding: banky/python_backend/routes/subscription_payments.py (deflated 81%)
  adding: banky/python_backend/routes/__init__.py (stored 0%)
  adding: banky/python_backend/routes/features.py (deflated 77%)
  adding: banky/python_backend/routes/guarantors.py (deflated 82%)
  adding: banky/python_backend/routes/hr.py (deflated 87%)
  adding: banky/python_backend/routes/dashboard.py (deflated 67%)
  adding: banky/python_backend/routes/admin.py (deflated 80%)
  adding: banky/python_backend/routes/loans.py (deflated 83%)
  adding: banky/python_backend/routes/common.py (deflated 74%)
  adding: banky/python_backend/routes/dividends.py (deflated 81%)
  adding: banky/python_backend/routes/fixed_deposits.py (deflated 85%)
  adding: banky/python_backend/routes/loan_products.py (deflated 77%)
  adding: banky/python_backend/routes/repayments.py (deflated 78%)
  adding: banky/python_backend/routes/reports.py (deflated 82%)
  adding: banky/python_backend/routes/settings.py (deflated 82%)
  adding: banky/python_backend/routes/defaults.py (deflated 81%)
  adding: banky/python_backend/routes/notifications.py (deflated 78%)
  adding: banky/python_backend/routes/restructure.py (deflated 80%)
  adding: banky/python_backend/routes/analytics.py (deflated 81%)
  adding: banky/python_backend/routes/sms.py (deflated 81%)
  adding: banky/python_backend/cron_auto_loan_deduction.py (deflated 76%)
  adding: banky/python_backend/services/ (stored 0%)
  adding: banky/python_backend/services/stripe_service.py (deflated 61%)
  adding: banky/python_backend/services/tenant_context.py (deflated 84%)
  adding: banky/python_backend/services/auth.py (deflated 66%)
  adding: banky/python_backend/services/sunpay.py (deflated 81%)
  adding: banky/python_backend/services/__init__.py (stored 0%)
  adding: banky/python_backend/services/feature_flags.py (deflated 74%)
  adding: banky/python_backend/services/neon_tenant.py (deflated 74%)
  adding: banky/python_backend/services/email_service.py (deflated 73%)
  adding: banky/python_backend/services/paystack_service.py (deflated 70%)
  adding: banky/python_backend/services/instalment_service.py (deflated 86%)
  adding: banky/python_backend/services/exchange_rate.py (deflated 65%)
  adding: banky/python_backend/services/mpesa_loan_service.py (deflated 74%)
  adding: banky/python_backend/services/code_generator.py (deflated 55%)
  adding: banky/tailwind.config.ts (deflated 79%)
  adding: banky/package-lock.json (deflated 78%)
  adding: banky/package.json (deflated 68%)
  adding: banky/tsconfig.json (deflated 50%)
  adding: banky/.env.example (deflated 60%)
  adding: banky/vite.config.ts (deflated 61%)
  adding: banky/postcss.config.js (deflated 18%)
  adding: banky/ecosystem.config.js (deflated 59%)
  adding: banky/client/ (stored 0%)
  adding: banky/client/index.html (deflated 62%)
  adding: banky/client/public/ (stored 0%)
  adding: banky/client/public/favicon.png (deflated 1%)
  adding: banky/client/src/ (stored 0%)
  adding: banky/client/src/App.tsx (deflated 70%)
  adding: banky/client/src/main.tsx (deflated 24%)
  adding: banky/client/src/context/ (stored 0%)
  adding: banky/client/src/context/BrandingContext.tsx (deflated 58%)
  adding: banky/client/src/index.css (deflated 75%)
  adding: banky/client/src/components/ (stored 0%)
  adding: banky/client/src/components/audit-logs.tsx (deflated 78%)
  adding: banky/client/src/components/theme-provider.tsx (deflated 61%)
  adding: banky/client/src/components/roles-documentation.tsx (deflated 78%)
  adding: banky/client/src/components/branch-management.tsx (deflated 78%)
  adding: banky/client/src/components/ui/ (stored 0%)
  adding: banky/client/src/components/ui/aspect-ratio.tsx (deflated 34%)
  adding: banky/client/src/components/ui/alert-dialog.tsx (deflated 77%)
  adding: banky/client/src/components/ui/pagination.tsx (deflated 70%)
  adding: banky/client/src/components/ui/tabs.tsx (deflated 70%)
  adding: banky/client/src/components/ui/card.tsx (deflated 75%)
  adding: banky/client/src/components/ui/slider.tsx (deflated 56%)
  adding: banky/client/src/components/ui/popover.tsx (deflated 59%)
  adding: banky/client/src/components/ui/progress.tsx (deflated 50%)
  adding: banky/client/src/components/ui/toaster.tsx (deflated 59%)
  adding: banky/client/src/components/ui/input-otp.tsx (deflated 65%)
  adding: banky/client/src/components/ui/chart.tsx (deflated 73%)
  adding: banky/client/src/components/ui/hover-card.tsx (deflated 58%)
  adding: banky/client/src/components/ui/sheet.tsx (deflated 72%)
  adding: banky/client/src/components/ui/scroll-area.tsx (deflated 67%)
  adding: banky/client/src/components/ui/resizable.tsx (deflated 67%)
  adding: banky/client/src/components/ui/label.tsx (deflated 50%)
  adding: banky/client/src/components/ui/navigation-menu.tsx (deflated 76%)
  adding: banky/client/src/components/ui/accordion.tsx (deflated 68%)
  adding: banky/client/src/components/ui/drawer.tsx (deflated 73%)
  adding: banky/client/src/components/ui/tooltip.tsx (deflated 58%)
  adding: banky/client/src/components/ui/alert.tsx (deflated 62%)
  adding: banky/client/src/components/ui/switch.tsx (deflated 55%)
  adding: banky/client/src/components/ui/calendar.tsx (deflated 65%)
  adding: banky/client/src/components/ui/breadcrumb.tsx (deflated 68%)
  adding: banky/client/src/components/ui/radio-group.tsx (deflated 64%)
  adding: banky/client/src/components/ui/command.tsx (deflated 75%)
  adding: banky/client/src/components/ui/toggle-group.tsx (deflated 68%)
  adding: banky/client/src/components/ui/avatar.tsx (deflated 68%)
  adding: banky/client/src/components/ui/menubar.tsx (deflated 82%)
  adding: banky/client/src/components/ui/dialog.tsx (deflated 72%)
  adding: banky/client/src/components/ui/badge.tsx (deflated 54%)
  adding: banky/client/src/components/ui/sidebar.tsx (deflated 78%)
  adding: banky/client/src/components/ui/table.tsx (deflated 76%)
  adding: banky/client/src/components/ui/separator.tsx (deflated 54%)
  adding: banky/client/src/components/ui/button.tsx (deflated 57%)
  adding: banky/client/src/components/ui/toggle.tsx (deflated 57%)
  adding: banky/client/src/components/ui/toast.tsx (deflated 73%)
  adding: banky/client/src/components/ui/checkbox.tsx (deflated 55%)
  adding: banky/client/src/components/ui/collapsible.tsx (deflated 60%)
  adding: banky/client/src/components/ui/dropdown-menu.tsx (deflated 81%)
  adding: banky/client/src/components/ui/select.tsx (deflated 75%)
  adding: banky/client/src/components/ui/textarea.tsx (deflated 44%)
  adding: banky/client/src/components/ui/input.tsx (deflated 47%)
  adding: banky/client/src/components/ui/skeleton.tsx (deflated 27%)
  adding: banky/client/src/components/ui/context-menu.tsx (deflated 81%)
  adding: banky/client/src/components/ui/form.tsx (deflated 73%)
  adding: banky/client/src/components/ui/carousel.tsx (deflated 73%)
  adding: banky/client/src/components/reports.tsx (deflated 75%)
  adding: banky/client/src/components/hr-management.tsx (deflated 88%)
  adding: banky/client/src/components/permission-guard.tsx (deflated 74%)
  adding: banky/client/src/components/analytics-dashboard.tsx (deflated 80%)
  adding: banky/client/src/components/data-table.tsx (deflated 73%)
  adding: banky/client/src/components/teller-station.tsx (deflated 84%)
  adding: banky/client/src/components/ticketing-kiosk.tsx (deflated 68%)
  adding: banky/client/src/components/defaults-collections.tsx (deflated 83%)
  adding: banky/client/src/components/sms-notifications.tsx (deflated 83%)
  adding: banky/client/src/components/leave-management.tsx (deflated 83%)
  adding: banky/client/src/components/teller-services.tsx (deflated 86%)
  adding: banky/client/src/components/stats-card.tsx (deflated 58%)
  adding: banky/client/src/components/transactions.tsx (deflated 78%)
  adding: banky/client/src/components/guarantors.tsx (deflated 80%)
  adding: banky/client/src/components/staff-management.tsx (deflated 83%)
  adding: banky/client/src/components/dividends.tsx (deflated 81%)
  adding: banky/client/src/components/queue-display-board.tsx (deflated 72%)
  adding: banky/client/src/components/trial-banner.tsx (deflated 74%)
  adding: banky/client/src/components/journal-entries.tsx (deflated 79%)
  adding: banky/client/src/components/roles-management.tsx (deflated 77%)
  adding: banky/client/src/components/float-management.tsx (deflated 86%)
  adding: banky/client/src/components/opening-balances.tsx (deflated 75%)
  adding: banky/client/src/components/chart-of-accounts.tsx (deflated 85%)
  adding: banky/client/src/components/app-sidebar.tsx (deflated 77%)
  adding: banky/client/src/components/member-statement-page.tsx (deflated 77%)
  adding: banky/client/src/components/status-badge.tsx (deflated 61%)
  adding: banky/client/src/components/expenses-management.tsx (deflated 84%)
  adding: banky/client/src/components/org-setup-progress.tsx (deflated 69%)
  adding: banky/client/src/components/fixed-deposits.tsx (deflated 83%)
  adding: banky/client/src/components/loan-restructuring.tsx (deflated 78%)
  adding: banky/client/src/components/refresh-button.tsx (deflated 53%)
  adding: banky/client/src/components/notification-center.tsx (deflated 70%)
  adding: banky/client/src/components/loan-applications.tsx (deflated 83%)
  adding: banky/client/src/components/page-header.tsx (deflated 48%)
  adding: banky/client/src/components/onboarding-wizard.tsx (deflated 77%)
  adding: banky/client/src/components/theme-toggle.tsx (deflated 49%)
  adding: banky/client/src/components/loan-products.tsx (deflated 84%)
  adding: banky/client/src/components/reports/ (stored 0%)
  adding: banky/client/src/components/reports/aging-tab.tsx (deflated 72%)
  adding: banky/client/src/components/reports/members-tab.tsx (deflated 73%)
  adding: banky/client/src/components/reports/statement-tab.tsx (deflated 78%)
  adding: banky/client/src/components/reports/loans-tab.tsx (deflated 75%)
  adding: banky/client/src/components/reports/types.ts (deflated 73%)
  adding: banky/client/src/components/reports/summary-tab.tsx (deflated 73%)
  adding: banky/client/src/components/reports/filters-bar.tsx (deflated 70%)
  adding: banky/client/src/components/reports/pnl-tab.tsx (deflated 71%)
  adding: banky/client/src/components/member-management.tsx (deflated 84%)
  adding: banky/client/src/components/repayments.tsx (deflated 78%)
  adding: banky/client/src/hooks/ (stored 0%)
  adding: banky/client/src/hooks/use-mobile.tsx (deflated 48%)
  adding: banky/client/src/hooks/use-session.ts (deflated 57%)
  adding: banky/client/src/hooks/use-auth.ts (deflated 55%)
  adding: banky/client/src/hooks/use-currency.ts (deflated 52%)
  adding: banky/client/src/hooks/use-resource-permissions.ts (deflated 47%)
  adding: banky/client/src/hooks/use-permissions.ts (deflated 66%)
  adding: banky/client/src/hooks/use-toast.ts (deflated 67%)
  adding: banky/client/src/hooks/use-features.ts (deflated 58%)
  adding: banky/client/src/lib/ (stored 0%)
  adding: banky/client/src/lib/auth-utils.ts (deflated 42%)
  adding: banky/client/src/lib/currency.ts (deflated 70%)
  adding: banky/client/src/lib/error-utils.ts (deflated 68%)
  adding: banky/client/src/lib/utils.ts (deflated 27%)
  adding: banky/client/src/lib/queryClient.ts (deflated 56%)
  adding: banky/client/src/pages/ (stored 0%)
  adding: banky/client/src/pages/settings.tsx (deflated 79%)
  adding: banky/client/src/pages/add-staff.tsx (deflated 80%)
  adding: banky/client/src/pages/terms.tsx (deflated 59%)
  adding: banky/client/src/pages/login.tsx (deflated 71%)
  adding: banky/client/src/pages/dashboard.tsx (deflated 77%)
  adding: banky/client/src/pages/home.tsx (deflated 79%)
  adding: banky/client/src/pages/register.tsx (deflated 77%)
  adding: banky/client/src/pages/my-account.tsx (deflated 80%)
  adding: banky/client/src/pages/privacy.tsx (deflated 59%)
  adding: banky/client/src/pages/upgrade.tsx (deflated 77%)
  adding: banky/client/src/pages/reset-password.tsx (deflated 74%)
  adding: banky/client/src/pages/forgot-password.tsx (deflated 68%)
  adding: banky/client/src/pages/verify-email.tsx (deflated 79%)
  adding: banky/client/src/pages/not-found.tsx (deflated 50%)
  adding: banky/start.sh (deflated 68%)
>>> ZIP package: packages/codecanyon/banky-v1.0.0.zip

>>> Cleaning up temporary files...

========================================
  Build Complete!
========================================

Build outputs:
  - CodeCanyon: packages/codecanyon/
                packages/codecanyon/banky-v1.0.0.zip

mac@macs-MacBook-Pro banky % cd packages/codecanyon/banky
mac@macs-MacBook-Pro banky % ./install.sh 

================================================================
  BANKY - Bank & Sacco Management System
  Installer
================================================================

  Platform: mac

>>> Step 1/6: Checking prerequisites...
    [OK] Node.js v25.2.1
    [WARN] No Python 3.11+ found on system — using pyenv to install Python 3.11.9
    [SKIP] pyenv already installed (pyenv 2.6.23)
    [SKIP] Python 3.11.9 already installed in pyenv
    [OK] Using Python Python 3.11.9 from pyenv

>>> Step 2/6: Setting up environment...
    [OK] .env file created from template

>>> Step 3/6: Installing frontend dependencies...

To address all issues, run:
  npm audit fix

Run `npm audit` for details.
    [OK] Node.js dependencies installed

>>> Step 4/6: Installing Python backend dependencies...
    [OK] Python virtual environment created (Python 3.11.9)
Collecting fastapi==0.129.0 (from -r python_backend/requirements.txt (line 1))
  Using cached fastapi-0.129.0-py3-none-any.whl.metadata (30 kB)
Collecting uvicorn==0.41.0 (from -r python_backend/requirements.txt (line 2))
  Using cached uvicorn-0.41.0-py3-none-any.whl.metadata (6.7 kB)
Collecting sqlalchemy==2.0.46 (from -r python_backend/requirements.txt (line 3))
  Using cached sqlalchemy-2.0.46-py3-none-any.whl.metadata (9.5 kB)
Collecting psycopg2-binary==2.9.11 (from -r python_backend/requirements.txt (line 4))
  Using cached psycopg2_binary-2.9.11-cp311-cp311-macosx_10_9_x86_64.whl.metadata (4.9 kB)
Collecting pydantic==2.12.5 (from -r python_backend/requirements.txt (line 5))
  Using cached pydantic-2.12.5-py3-none-any.whl.metadata (90 kB)
Collecting python-dotenv==1.2.1 (from -r python_backend/requirements.txt (line 6))
  Using cached python_dotenv-1.2.1-py3-none-any.whl.metadata (25 kB)
Collecting python-dateutil==2.9.0.post0 (from -r python_backend/requirements.txt (line 7))
  Using cached python_dateutil-2.9.0.post0-py2.py3-none-any.whl.metadata (8.4 kB)
Collecting python-multipart==0.0.22 (from -r python_backend/requirements.txt (line 8))
  Using cached python_multipart-0.0.22-py3-none-any.whl.metadata (1.8 kB)
Collecting bcrypt==5.0.0 (from -r python_backend/requirements.txt (line 9))
  Using cached bcrypt-5.0.0-cp39-abi3-macosx_10_12_universal2.whl.metadata (10 kB)
Collecting httpx==0.28.1 (from -r python_backend/requirements.txt (line 10))
  Using cached httpx-0.28.1-py3-none-any.whl.metadata (7.1 kB)
Collecting requests==2.32.5 (from -r python_backend/requirements.txt (line 11))
  Using cached requests-2.32.5-py3-none-any.whl.metadata (4.9 kB)
Collecting stripe==14.3.0 (from -r python_backend/requirements.txt (line 12))
  Using cached stripe-14.3.0-py3-none-any.whl.metadata (18 kB)
Collecting reportlab==4.4.10 (from -r python_backend/requirements.txt (line 13))
  Using cached reportlab-4.4.10-py3-none-any.whl.metadata (1.7 kB)
Collecting pypdf==6.7.1 (from -r python_backend/requirements.txt (line 14))
  Using cached pypdf-6.7.1-py3-none-any.whl.metadata (7.1 kB)
Collecting email-validator==2.3.0 (from -r python_backend/requirements.txt (line 15))
  Using cached email_validator-2.3.0-py3-none-any.whl.metadata (26 kB)
Collecting starlette<1.0.0,>=0.40.0 (from fastapi==0.129.0->-r python_backend/requirements.txt (line 1))
  Using cached starlette-0.52.1-py3-none-any.whl.metadata (6.3 kB)
Collecting typing-extensions>=4.8.0 (from fastapi==0.129.0->-r python_backend/requirements.txt (line 1))
  Using cached typing_extensions-4.15.0-py3-none-any.whl.metadata (3.3 kB)
Collecting typing-inspection>=0.4.2 (from fastapi==0.129.0->-r python_backend/requirements.txt (line 1))
  Using cached typing_inspection-0.4.2-py3-none-any.whl.metadata (2.6 kB)
Collecting annotated-doc>=0.0.2 (from fastapi==0.129.0->-r python_backend/requirements.txt (line 1))
  Using cached annotated_doc-0.0.4-py3-none-any.whl.metadata (6.6 kB)
Collecting click>=7.0 (from uvicorn==0.41.0->-r python_backend/requirements.txt (line 2))
  Using cached click-8.3.1-py3-none-any.whl.metadata (2.6 kB)
Collecting h11>=0.8 (from uvicorn==0.41.0->-r python_backend/requirements.txt (line 2))
  Using cached h11-0.16.0-py3-none-any.whl.metadata (8.3 kB)
Collecting greenlet>=1 (from sqlalchemy==2.0.46->-r python_backend/requirements.txt (line 3))
  Using cached greenlet-3.3.2-cp311-cp311-macosx_11_0_universal2.whl.metadata (3.7 kB)
Collecting annotated-types>=0.6.0 (from pydantic==2.12.5->-r python_backend/requirements.txt (line 5))
  Using cached annotated_types-0.7.0-py3-none-any.whl.metadata (15 kB)
Collecting pydantic-core==2.41.5 (from pydantic==2.12.5->-r python_backend/requirements.txt (line 5))
  Using cached pydantic_core-2.41.5-cp311-cp311-macosx_10_12_x86_64.whl.metadata (7.3 kB)
Collecting six>=1.5 (from python-dateutil==2.9.0.post0->-r python_backend/requirements.txt (line 7))
  Using cached six-1.17.0-py2.py3-none-any.whl.metadata (1.7 kB)
Collecting anyio (from httpx==0.28.1->-r python_backend/requirements.txt (line 10))
  Using cached anyio-4.12.1-py3-none-any.whl.metadata (4.3 kB)
Collecting certifi (from httpx==0.28.1->-r python_backend/requirements.txt (line 10))
  Using cached certifi-2026.1.4-py3-none-any.whl.metadata (2.5 kB)
Collecting httpcore==1.* (from httpx==0.28.1->-r python_backend/requirements.txt (line 10))
  Using cached httpcore-1.0.9-py3-none-any.whl.metadata (21 kB)
Collecting idna (from httpx==0.28.1->-r python_backend/requirements.txt (line 10))
  Using cached idna-3.11-py3-none-any.whl.metadata (8.4 kB)
Collecting charset_normalizer<4,>=2 (from requests==2.32.5->-r python_backend/requirements.txt (line 11))
  Using cached charset_normalizer-3.4.4-cp311-cp311-macosx_10_9_universal2.whl.metadata (37 kB)
Collecting urllib3<3,>=1.21.1 (from requests==2.32.5->-r python_backend/requirements.txt (line 11))
  Using cached urllib3-2.6.3-py3-none-any.whl.metadata (6.9 kB)
Collecting pillow>=9.0.0 (from reportlab==4.4.10->-r python_backend/requirements.txt (line 13))
  Using cached pillow-12.1.1-cp311-cp311-macosx_10_10_x86_64.whl.metadata (8.8 kB)
Collecting dnspython>=2.0.0 (from email-validator==2.3.0->-r python_backend/requirements.txt (line 15))
  Using cached dnspython-2.8.0-py3-none-any.whl.metadata (5.7 kB)
Using cached fastapi-0.129.0-py3-none-any.whl (102 kB)
Using cached uvicorn-0.41.0-py3-none-any.whl (68 kB)
Using cached sqlalchemy-2.0.46-py3-none-any.whl (1.9 MB)
Using cached psycopg2_binary-2.9.11-cp311-cp311-macosx_10_9_x86_64.whl (3.8 MB)
Using cached pydantic-2.12.5-py3-none-any.whl (463 kB)
Using cached python_dotenv-1.2.1-py3-none-any.whl (21 kB)
Using cached python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
Using cached python_multipart-0.0.22-py3-none-any.whl (24 kB)
Using cached bcrypt-5.0.0-cp39-abi3-macosx_10_12_universal2.whl (495 kB)
Using cached httpx-0.28.1-py3-none-any.whl (73 kB)
Using cached requests-2.32.5-py3-none-any.whl (64 kB)
Using cached stripe-14.3.0-py3-none-any.whl (2.1 MB)
Using cached reportlab-4.4.10-py3-none-any.whl (2.0 MB)
Using cached pypdf-6.7.1-py3-none-any.whl (331 kB)
Using cached email_validator-2.3.0-py3-none-any.whl (35 kB)
Using cached pydantic_core-2.41.5-cp311-cp311-macosx_10_12_x86_64.whl (2.1 MB)
Using cached charset_normalizer-3.4.4-cp311-cp311-macosx_10_9_universal2.whl (206 kB)
Using cached httpcore-1.0.9-py3-none-any.whl (78 kB)
Using cached idna-3.11-py3-none-any.whl (71 kB)
Using cached starlette-0.52.1-py3-none-any.whl (74 kB)
Using cached anyio-4.12.1-py3-none-any.whl (113 kB)
Using cached urllib3-2.6.3-py3-none-any.whl (131 kB)
Using cached annotated_doc-0.0.4-py3-none-any.whl (5.3 kB)
Using cached annotated_types-0.7.0-py3-none-any.whl (13 kB)
Using cached certifi-2026.1.4-py3-none-any.whl (152 kB)
Using cached click-8.3.1-py3-none-any.whl (108 kB)
Using cached dnspython-2.8.0-py3-none-any.whl (331 kB)
Using cached greenlet-3.3.2-cp311-cp311-macosx_11_0_universal2.whl (278 kB)
Using cached h11-0.16.0-py3-none-any.whl (37 kB)
Using cached pillow-12.1.1-cp311-cp311-macosx_10_10_x86_64.whl (5.3 MB)
Using cached six-1.17.0-py2.py3-none-any.whl (11 kB)
Using cached typing_extensions-4.15.0-py3-none-any.whl (44 kB)
Using cached typing_inspection-0.4.2-py3-none-any.whl (14 kB)
Installing collected packages: urllib3, typing-extensions, six, python-multipart, python-dotenv, pypdf, psycopg2-binary, pillow, idna, h11, greenlet, dnspython, click, charset_normalizer, certifi, bcrypt, annotated-types, annotated-doc, uvicorn, typing-inspection, sqlalchemy, requests, reportlab, python-dateutil, pydantic-core, httpcore, email-validator, anyio, stripe, starlette, pydantic, httpx, fastapi
Successfully installed annotated-doc-0.0.4 annotated-types-0.7.0 anyio-4.12.1 bcrypt-5.0.0 certifi-2026.1.4 charset_normalizer-3.4.4 click-8.3.1 dnspython-2.8.0 email-validator-2.3.0 fastapi-0.129.0 greenlet-3.3.2 h11-0.16.0 httpcore-1.0.9 httpx-0.28.1 idna-3.11 pillow-12.1.1 psycopg2-binary-2.9.11 pydantic-2.12.5 pydantic-core-2.41.5 pypdf-6.7.1 python-dateutil-2.9.0.post0 python-dotenv-1.2.1 python-multipart-0.0.22 reportlab-4.4.10 requests-2.32.5 six-1.17.0 sqlalchemy-2.0.46 starlette-0.52.1 stripe-14.3.0 typing-extensions-4.15.0 typing-inspection-0.4.2 urllib3-2.6.3 uvicorn-0.41.0
    [OK] Python dependencies installed

>>> Step 5/6: Setting up database...
    [OK] PostgreSQL 14.20
    [WARN] Database 'banky' not found — creating...
    [OK] Database 'banky' created
    [OK] DATABASE_URL set to: postgresql://localhost:5432/banky
    Running database migrations...
Traceback (most recent call last):
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InFailedSqlTransaction: current transaction is aborted, commands ignored until end of transaction block
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "<string>", line 8, in <module>
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/python_backend/main.py", line 278, in run_master_migrations
    _add_master_column_if_not_exists(conn, "users", col_name, col_type)
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/python_backend/main.py", line 254, in _add_master_column_if_not_exists
    result = conn.execute(text(f"""
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.InternalError: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block
[SQL: 
        SELECT column_name FROM information_schema.columns 
        WHERE table_name = 'users' AND column_name = 'approval_pin'
    ]
(Background on this error at: https://sqlalche.me/e/20/2j85)
Running master DB migrations (v-1 -> v3)...
Master migration warning: Could not add users.is_email_verified: (psycopg2.errors.UndefinedTable) relation "users" does not exist
[SQL: ALTER TABLE users ADD COLUMN IF NOT EXISTS is_email_verified BOOLEAN DEFAULT FALSE]
(Background on this error at: https://sqlalche.me/e/20/f405)
    [OK] Database migrations applied

>>> Step 6/6: Building application...
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
✓ built in 7.40s
    [OK] Frontend built successfully

================================================================
  Installation Complete!
================================================================

  To start BANKY:

    ./start.sh

  Then open: http://localhost:5000

  For production deployment (Nginx, PM2, SSL), see the
  deployment guide in the documentation.

  All features are unlocked. No license key needed.

mac@macs-MacBook-Pro banky % ./start.sh 

================================================================
  BANKY - Bank & Sacco Management System
================================================================

  Starting BANKY (development mode)...

  Starting API server on port 8000...
  Starting scheduler...
  Starting frontend on port 5000...

  ================================================================
  BANKY is running!
  ================================================================

  App: http://localhost:5000
  API: http://localhost:8000

  Press Ctrl+C to stop

============================================================
  BANKY Unified Scheduler
  Started: 2026-02-22 15:16:13
============================================================

Registered jobs:
  - Check trial subscription statuses (every 6h)
  - Process matured fixed deposits (every 6h)
  - Send loan due-today reminders (every 12h)
  - Send overdue loan notices (every 12h)
  - Process recurring expenses (every 6h)
  - Auto-deduct loan repayments from savings (every 1h)
  - Send subscription renewal reminders (every 12h)

[Scheduler] Running all jobs on startup...

============================================================
[2026-02-22 15:16:13] Running: Check trial subscription statuses
============================================================
INFO:     Will watch for changes in these directories: ['/Users/mac/projects/projects/banky/packages/codecanyon/banky/python_backend']
ERROR:    [Errno 48] Address already in use
=== Trial Status Check - 2026-02-22 ===
ERROR: (psycopg2.errors.UndefinedTable) relation "organization_subscriptions" does not exist
LINE 2: FROM organization_subscriptions 
             ^

[SQL: SELECT organization_subscriptions.id AS organization_subscriptions_id, organization_subscriptions.organization_id AS organization_subscriptions_organization_id, organization_subscriptions.plan_id AS organization_subscriptions_plan_id, organization_subscriptions.status AS organization_subscriptions_status, organization_subscriptions.trial_ends_at AS organization_subscriptions_trial_ends_at, organization_subscriptions.current_period_start AS organization_subscriptions_current_period_start, organization_subscriptions.current_period_end AS organization_subscriptions_current_period_end, organization_subscriptions.sms_credits_used AS organization_subscriptions_sms_credits_used, organization_subscriptions.created_at AS organization_subscriptions_created_at, organization_subscriptions.updated_at AS organization_subscriptions_updated_at 
FROM organization_subscriptions 
WHERE organization_subscriptions.status = %(status_1)s AND organization_subscriptions.trial_ends_at IS NOT NULL AND organization_subscriptions.trial_ends_at < %(trial_ends_at_1)s]
[parameters: {'status_1': 'trial', 'trial_ends_at_1': datetime.datetime(2026, 2, 22, 12, 16, 14, 25027)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
[ERROR] Check trial subscription statuses exited with code 1

============================================================
[2026-02-22 15:16:14] Running: Process matured fixed deposits
============================================================
=== Fixed Deposit Maturity Processing - 2026-02-22 ===
ERROR: (psycopg2.errors.UndefinedTable) relation "organizations" does not exist
LINE 2: FROM organizations 
             ^

[SQL: SELECT organizations.id AS organizations_id, organizations.name AS organizations_name, organizations.code AS organizations_code, organizations.logo AS organizations_logo, organizations.email AS organizations_email, organizations.phone AS organizations_phone, organizations.address AS organizations_address, organizations.staff_email_domain AS organizations_staff_email_domain, organizations.deployment_mode AS organizations_deployment_mode, organizations.working_hours_start AS organizations_working_hours_start, organizations.working_hours_end AS organizations_working_hours_end, organizations.working_days AS organizations_working_days, organizations.currency AS organizations_currency, organizations.financial_year_start AS organizations_financial_year_start, organizations.enforce_working_hours AS organizations_enforce_working_hours, organizations.require_clock_in AS organizations_require_clock_in, organizations.allow_weekend_access AS organizations_allow_weekend_access, organizations.timezone AS organizations_timezone, organizations.auto_logout_minutes AS organizations_auto_logout_minutes, organizations.require_two_factor_auth AS organizations_require_two_factor_auth, organizations.is_active AS organizations_is_active, organizations.created_at AS organizations_created_at, organizations.updated_at AS organizations_updated_at, organizations.neon_project_id AS organizations_neon_project_id, organizations.neon_branch_id AS organizations_neon_branch_id, organizations.connection_string AS organizations_connection_string 
FROM organizations 
WHERE organizations.is_active = true AND organizations.connection_string IS NOT NULL]
(Background on this error at: https://sqlalche.me/e/20/f405)
[ERROR] Process matured fixed deposits exited with code 1

============================================================
[2026-02-22 15:16:14] Running: Send loan due-today reminders
============================================================
Port 5000 is in use, trying another one...

  VITE v7.3.1  ready in 292 ms

  ➜  Local:   http://localhost:5001/
  ➜  Network: http://10.41.197.42:5001/
=== Loan Notifications - 2026-02-22 (mode: due_today) ===
ERROR: (psycopg2.errors.UndefinedTable) relation "organizations" does not exist
LINE 2: FROM organizations 
             ^

[SQL: SELECT organizations.id AS organizations_id, organizations.name AS organizations_name, organizations.code AS organizations_code, organizations.logo AS organizations_logo, organizations.email AS organizations_email, organizations.phone AS organizations_phone, organizations.address AS organizations_address, organizations.staff_email_domain AS organizations_staff_email_domain, organizations.deployment_mode AS organizations_deployment_mode, organizations.working_hours_start AS organizations_working_hours_start, organizations.working_hours_end AS organizations_working_hours_end, organizations.working_days AS organizations_working_days, organizations.currency AS organizations_currency, organizations.financial_year_start AS organizations_financial_year_start, organizations.enforce_working_hours AS organizations_enforce_working_hours, organizations.require_clock_in AS organizations_require_clock_in, organizations.allow_weekend_access AS organizations_allow_weekend_access, organizations.timezone AS organizations_timezone, organizations.auto_logout_minutes AS organizations_auto_logout_minutes, organizations.require_two_factor_auth AS organizations_require_two_factor_auth, organizations.is_active AS organizations_is_active, organizations.created_at AS organizations_created_at, organizations.updated_at AS organizations_updated_at, organizations.neon_project_id AS organizations_neon_project_id, organizations.neon_branch_id AS organizations_neon_branch_id, organizations.connection_string AS organizations_connection_string 
FROM organizations 
WHERE organizations.connection_string IS NOT NULL AND organizations.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
[ERROR] Send loan due-today reminders exited with code 1

============================================================
[2026-02-22 15:16:14] Running: Send overdue loan notices
============================================================
=== Loan Notifications - 2026-02-22 (mode: overdue) ===
ERROR: (psycopg2.errors.UndefinedTable) relation "organizations" does not exist
LINE 2: FROM organizations 
             ^

[SQL: SELECT organizations.id AS organizations_id, organizations.name AS organizations_name, organizations.code AS organizations_code, organizations.logo AS organizations_logo, organizations.email AS organizations_email, organizations.phone AS organizations_phone, organizations.address AS organizations_address, organizations.staff_email_domain AS organizations_staff_email_domain, organizations.deployment_mode AS organizations_deployment_mode, organizations.working_hours_start AS organizations_working_hours_start, organizations.working_hours_end AS organizations_working_hours_end, organizations.working_days AS organizations_working_days, organizations.currency AS organizations_currency, organizations.financial_year_start AS organizations_financial_year_start, organizations.enforce_working_hours AS organizations_enforce_working_hours, organizations.require_clock_in AS organizations_require_clock_in, organizations.allow_weekend_access AS organizations_allow_weekend_access, organizations.timezone AS organizations_timezone, organizations.auto_logout_minutes AS organizations_auto_logout_minutes, organizations.require_two_factor_auth AS organizations_require_two_factor_auth, organizations.is_active AS organizations_is_active, organizations.created_at AS organizations_created_at, organizations.updated_at AS organizations_updated_at, organizations.neon_project_id AS organizations_neon_project_id, organizations.neon_branch_id AS organizations_neon_branch_id, organizations.connection_string AS organizations_connection_string 
FROM organizations 
WHERE organizations.connection_string IS NOT NULL AND organizations.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
[ERROR] Send overdue loan notices exited with code 1

============================================================
[2026-02-22 15:16:14] Running: Process recurring expenses
============================================================
=== Recurring Expenses Processing - 2026-02-22 ===
ERROR: (psycopg2.errors.UndefinedTable) relation "organizations" does not exist
LINE 2: FROM organizations 
             ^

[SQL: SELECT organizations.id AS organizations_id, organizations.name AS organizations_name, organizations.code AS organizations_code, organizations.logo AS organizations_logo, organizations.email AS organizations_email, organizations.phone AS organizations_phone, organizations.address AS organizations_address, organizations.staff_email_domain AS organizations_staff_email_domain, organizations.deployment_mode AS organizations_deployment_mode, organizations.working_hours_start AS organizations_working_hours_start, organizations.working_hours_end AS organizations_working_hours_end, organizations.working_days AS organizations_working_days, organizations.currency AS organizations_currency, organizations.financial_year_start AS organizations_financial_year_start, organizations.enforce_working_hours AS organizations_enforce_working_hours, organizations.require_clock_in AS organizations_require_clock_in, organizations.allow_weekend_access AS organizations_allow_weekend_access, organizations.timezone AS organizations_timezone, organizations.auto_logout_minutes AS organizations_auto_logout_minutes, organizations.require_two_factor_auth AS organizations_require_two_factor_auth, organizations.is_active AS organizations_is_active, organizations.created_at AS organizations_created_at, organizations.updated_at AS organizations_updated_at, organizations.neon_project_id AS organizations_neon_project_id, organizations.neon_branch_id AS organizations_neon_branch_id, organizations.connection_string AS organizations_connection_string 
FROM organizations 
WHERE organizations.is_active = true AND organizations.connection_string IS NOT NULL]
(Background on this error at: https://sqlalche.me/e/20/f405)
[ERROR] Process recurring expenses exited with code 1

============================================================
[2026-02-22 15:16:14] Running: Auto-deduct loan repayments from savings
============================================================
=== Auto Loan Deduction from Savings - 2026-02-22 ===
ERROR: (psycopg2.errors.UndefinedTable) relation "organizations" does not exist
LINE 2: FROM organizations 
             ^

[SQL: SELECT organizations.id AS organizations_id, organizations.name AS organizations_name, organizations.code AS organizations_code, organizations.logo AS organizations_logo, organizations.email AS organizations_email, organizations.phone AS organizations_phone, organizations.address AS organizations_address, organizations.staff_email_domain AS organizations_staff_email_domain, organizations.deployment_mode AS organizations_deployment_mode, organizations.working_hours_start AS organizations_working_hours_start, organizations.working_hours_end AS organizations_working_hours_end, organizations.working_days AS organizations_working_days, organizations.currency AS organizations_currency, organizations.financial_year_start AS organizations_financial_year_start, organizations.enforce_working_hours AS organizations_enforce_working_hours, organizations.require_clock_in AS organizations_require_clock_in, organizations.allow_weekend_access AS organizations_allow_weekend_access, organizations.timezone AS organizations_timezone, organizations.auto_logout_minutes AS organizations_auto_logout_minutes, organizations.require_two_factor_auth AS organizations_require_two_factor_auth, organizations.is_active AS organizations_is_active, organizations.created_at AS organizations_created_at, organizations.updated_at AS organizations_updated_at, organizations.neon_project_id AS organizations_neon_project_id, organizations.neon_branch_id AS organizations_neon_branch_id, organizations.connection_string AS organizations_connection_string 
FROM organizations 
WHERE organizations.is_active = true AND organizations.connection_string IS NOT NULL]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedTable: relation "organizations" does not exist
LINE 2: FROM organizations 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/python_backend/cron_auto_loan_deduction.py", line 329, in main
    ).all()
      ^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "organizations" does not exist
LINE 2: FROM organizations 
             ^

[SQL: SELECT organizations.id AS organizations_id, organizations.name AS organizations_name, organizations.code AS organizations_code, organizations.logo AS organizations_logo, organizations.email AS organizations_email, organizations.phone AS organizations_phone, organizations.address AS organizations_address, organizations.staff_email_domain AS organizations_staff_email_domain, organizations.deployment_mode AS organizations_deployment_mode, organizations.working_hours_start AS organizations_working_hours_start, organizations.working_hours_end AS organizations_working_hours_end, organizations.working_days AS organizations_working_days, organizations.currency AS organizations_currency, organizations.financial_year_start AS organizations_financial_year_start, organizations.enforce_working_hours AS organizations_enforce_working_hours, organizations.require_clock_in AS organizations_require_clock_in, organizations.allow_weekend_access AS organizations_allow_weekend_access, organizations.timezone AS organizations_timezone, organizations.auto_logout_minutes AS organizations_auto_logout_minutes, organizations.require_two_factor_auth AS organizations_require_two_factor_auth, organizations.is_active AS organizations_is_active, organizations.created_at AS organizations_created_at, organizations.updated_at AS organizations_updated_at, organizations.neon_project_id AS organizations_neon_project_id, organizations.neon_branch_id AS organizations_neon_branch_id, organizations.connection_string AS organizations_connection_string 
FROM organizations 
WHERE organizations.is_active = true AND organizations.connection_string IS NOT NULL]
(Background on this error at: https://sqlalche.me/e/20/f405)
[ERROR] Auto-deduct loan repayments from savings exited with code 1

============================================================
[2026-02-22 15:16:14] Running: Send subscription renewal reminders
============================================================
=== Renewal Reminders - 2026-02-22 ===
ERROR: (psycopg2.errors.UndefinedTable) relation "organization_subscriptions" does not exist
LINE 2: FROM organization_subscriptions 
             ^

[SQL: SELECT organization_subscriptions.id AS organization_subscriptions_id, organization_subscriptions.organization_id AS organization_subscriptions_organization_id, organization_subscriptions.plan_id AS organization_subscriptions_plan_id, organization_subscriptions.status AS organization_subscriptions_status, organization_subscriptions.trial_ends_at AS organization_subscriptions_trial_ends_at, organization_subscriptions.current_period_start AS organization_subscriptions_current_period_start, organization_subscriptions.current_period_end AS organization_subscriptions_current_period_end, organization_subscriptions.sms_credits_used AS organization_subscriptions_sms_credits_used, organization_subscriptions.created_at AS organization_subscriptions_created_at, organization_subscriptions.updated_at AS organization_subscriptions_updated_at 
FROM organization_subscriptions 
WHERE organization_subscriptions.status = %(status_1)s AND organization_subscriptions.trial_ends_at IS NOT NULL AND organization_subscriptions.trial_ends_at > %(trial_ends_at_1)s AND organization_subscriptions.trial_ends_at <= %(trial_ends_at_2)s]
[parameters: {'status_1': 'trial', 'trial_ends_at_1': datetime.datetime(2026, 2, 22, 12, 16, 14, 920000), 'trial_ends_at_2': datetime.datetime(2026, 2, 25, 12, 16, 14, 920000)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedTable: relation "organization_subscriptions" does not exist
LINE 2: FROM organization_subscriptions 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/python_backend/cron_renewal_reminders.py", line 59, in main
    ).all()
      ^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/mac/projects/projects/banky/packages/codecanyon/banky/venv/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "organization_subscriptions" does not exist
LINE 2: FROM organization_subscriptions 
             ^

[SQL: SELECT organization_subscriptions.id AS organization_subscriptions_id, organization_subscriptions.organization_id AS organization_subscriptions_organization_id, organization_subscriptions.plan_id AS organization_subscriptions_plan_id, organization_subscriptions.status AS organization_subscriptions_status, organization_subscriptions.trial_ends_at AS organization_subscriptions_trial_ends_at, organization_subscriptions.current_period_start AS organization_subscriptions_current_period_start, organization_subscriptions.current_period_end AS organization_subscriptions_current_period_end, organization_subscriptions.sms_credits_used AS organization_subscriptions_sms_credits_used, organization_subscriptions.created_at AS organization_subscriptions_created_at, organization_subscriptions.updated_at AS organization_subscriptions_updated_at 
FROM organization_subscriptions 
WHERE organization_subscriptions.status = %(status_1)s AND organization_subscriptions.trial_ends_at IS NOT NULL AND organization_subscriptions.trial_ends_at > %(trial_ends_at_1)s AND organization_subscriptions.trial_ends_at <= %(trial_ends_at_2)s]
[parameters: {'status_1': 'trial', 'trial_ends_at_1': datetime.datetime(2026, 2, 22, 12, 16, 14, 920000), 'trial_ends_at_2': datetime.datetime(2026, 2, 25, 12, 16, 14, 920000)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
[15:16:14] Completed: Send subscription renewal reminders

[Scheduler] Initial run complete. Entering loop (checking every 60s)...
